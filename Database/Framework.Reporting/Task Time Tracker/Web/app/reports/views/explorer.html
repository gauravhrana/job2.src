<div class="page-header"><h3>Explorer</h3></div>


<nav class="navbar navbar-default">
    <ul class="nav navbar-nav">        
        <li><a data-ng-click="save();"><span class="glyphicon glyphicon-floppy-disk"></span> Save</a></li>
    </ul>
</nav>

<div class="form-horizontal">
    <div class="form-group">
        <label for="Entity" class="col-sm-2 control-label">Entity</label>
        <div class="col-sm-10">
            <select id="Entity" class="form-control" data-ui-select2="" data-ng-model="SelectedEntityId" data-ng-change="entityChanged()">
                <option value=""></option>
                <optgroup data-ng-repeat="(key, prop) in EntityTypes" label="{{key}}">
                    <option data-ng-repeat="entity in prop.Entities" value="{{entity.EntityCode}}">{{entity.EntityCode}}</option>
                </optgroup>
            </select>            
        </div>
    </div>
</div>

<div class="row">
    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">Available Fields</div>
            <div class="panel-body">
                <div style="overflow-x: auto;">
                    <ul style="list-style-type: none;">
                        <li ng-repeat="node in tree" ng-include="'tree_item_renderer.html'"></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    
    <div class="col-sm-6">
        <div class="panel panel-default">
            <div class="panel-heading">Selected Fields</div>
            <div class="panel-body">
                <div style="overflow-x: auto;">
                    <ul>
                        <li ng-repeat="path in selectedPaths">{{path}}</li>
                    </ul>                                        
                </div>
            </div>
        </div>
    </div>
</div>

<script type="text/ng-template" id="tree_item_renderer.html">
    <nobr>
        <a ng-click="collapse(node)" ng-if="(node.field.ReferenceEntityCode != undefined)&&(node.expanded)"><span class="fa fa-minus-square-o"></span></a>
        <a ng-click="expand(node)" ng-if="(node.field.ReferenceEntityCode != undefined)&&(!node.expanded)"><span class="fa fa-plus-square-o"></span></a>
        <input type="checkbox" ng-if="(node.field.ReferenceEntityCode == undefined)" ng-model="node.selected" ng-change="selectNode(node)" />
        <span ng-if="(node.field.ReferenceEntityCode != undefined)">&nbsp;{{node.field.ReferenceName}}</span>
        <span ng-if="(node.field.ReferenceEntityCode == undefined)">&nbsp;{{node.field.FieldCode}}</span>
    </nobr>
    <ul ng-show="node.expanded" style="list-style-type: none; ">
        <li ng-repeat="node in node.nodes" ng-include="'tree_item_renderer.html'"></li>
    </ul>

</script>






